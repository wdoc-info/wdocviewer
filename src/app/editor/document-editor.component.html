<div class="editor-wrapper">
  <div class="editor-toolbar" role="toolbar" aria-label="Editor tools">
    <button type="button" (click)="toggleBold()" [class.active]="isActive('bold')">
      Bold
    </button>
    <button type="button" (click)="toggleItalic()" [class.active]="isActive('italic')">
      Italic
    </button>
    <div class="toolbar-group heading-group" aria-label="Heading levels">
      @for (level of headingLevels; track level) {
        <button
          type="button"
          (click)="setHeading(level)"
          [class.active]="isActive('heading', { level })"
          [attr.aria-label]="'Heading ' + level"
        >
          H{{ level }}
        </button>
      }
    </div>
    <button type="button" (click)="toggleBulletList()" [class.active]="isActive('bulletList')">
      Bullet list
    </button>
    <button type="button" (click)="toggleOrderedList()" [class.active]="isActive('orderedList')">
      Numbered list
    </button>
    <label class="toolbar-input" aria-label="Text color">
      Text color
      <input type="color" [value]="textColor" (input)="applyTextColor($any($event.target).value)" />
    </label>
    <label class="toolbar-input" aria-label="Background color">
      Highlight
      <input
        type="color"
        [value]="highlightColor"
        (input)="applyHighlight($any($event.target).value)"
      />
      <button type="button" class="muted" (click)="clearHighlight()">Clear</button>
    </label>
    <label class="toolbar-input" aria-label="Insert image">
      <button type="button" class="primary" (click)="openImagePicker()">Insert image</button>
      <input #imageInput type="file" accept="image/*" (change)="onImageSelected($event)" />
    </label>
  </div>

  <div
    *ngIf="selectedImage"
    class="image-size-bar"
    role="group"
    aria-label="Image size controls"
  >
    <span class="image-size-label">Image size</span>
    <input
      type="range"
      min="10"
      max="100"
      step="5"
      [value]="selectedImageSize"
      (input)="onImageSizeChange($any($event.target).value)"
      aria-label="Image size percentage"
    />
    <span class="image-size-value">{{ selectedImageSize }}%</span>
    <button type="button" class="muted" (click)="clearImageSelection()">
      Close
    </button>
  </div>

  <wdoc-container class="editor-container" (click)="handleEditorClick($event)">
    <wdoc-content class="editor-content">
      <div class="page-list">
        @for (page of pageContents; let i = $index; track i) {
          <wdoc-page
            class="page-shell"
          >
            <div
              #pageHost
              class="editor-surface"
              aria-label="Document content"
              [attr.data-page-index]="i"
            ></div>
          </wdoc-page>
        }
      </div>
    </wdoc-content>
  </wdoc-container>
</div>
